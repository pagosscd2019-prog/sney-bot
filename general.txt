module.exports = {
    // Tasa BCV (se actualizar√° desde index.js)
    TASA_BCV: 381.00,
    
    // Respuestas seg√∫n tus m√≥dulos
    respuestas: {
        MENU_PRINCIPAL: `¬°Hola! üëã Soy Sney, asistente de Pagos y Servicios SCD2019. ¬øEn qu√© puedo ayudarte hoy?

Opciones disponibles:
üìã Consulta de precios y tasas.
‚öñÔ∏è Impuestos Vehiculares (Trimestres).
üõí Proceso de compra (Streaming, RCV, Payall, Movilway).
üîë Soporte / Reporte de fallas de cuentas.
üì≤ Informaci√≥n para revendedores.`,

        SOPORTE_TECNICO: `üõ†Ô∏è SOPORTE T√âCNICO - ¬øD√≥nde ves el error?
A) En mi plataforma de VENTAS (Payall / Movilway)
B) En una cuenta de STREAMING (Netflix, Disney, etc.)

Responde A o B para ayudarte r√°pido.`,

        TRIMESTRES: `üöó TRIMESTRES / IMPUESTOS VEHICULARES
Te ayudamos con la gesti√≥n. Tiempo estimado: 3 d√≠as h√°biles.

Para cotizar, necesito:
1. üì∏ Carnet de Circulaci√≥n o T√≠tulo
2. ü™™ C√©dula del propietario
3. üìß Correo electr√≥nico
4. üì± Tel√©fono de contacto
5. üìç Direcci√≥n exacta
6. üè¢ RIF Digital actualizado

¬øTienes el Carnet de Circulaci√≥n a la mano para comenzar?`,

        CREDITOS: `üí∞ SISTEMA DE CR√âDITOS
¬øDeseas solicitar un nuevo cr√©dito o reportar pago de cuota pendiente?

Para nuevos cr√©ditos (m√≠nimo 3 meses de historial):
1Ô∏è‚É£ Modalidad: A) Fijo / B) Eventual
2Ô∏è‚É£ C√©dula y Monto solicitado

¬øCu√°l es tu caso?`
    },
    
    // Funciones de c√°lculo
    calcularPrecio: function(dolares, esRevendedor = false) {
        let precioUSD = dolares;
        
        if (esRevendedor && dolares > 3) {
            precioUSD = dolares - 0.5;
        }
        
        const precioBs = Math.ceil(precioUSD * this.TASA_BCV);
        
        return {
            usd: precioUSD.toFixed(2),
            bs: precioBs,
            tasa: this.TASA_BCV
        };
    },
    
    calcularStreaming: function(tasaBCV) {
        const tasa = tasaBCV || this.TASA_BCV;
        
        return `üì∫ CAT√ÅLOGO DE STREAMING (Calculado a tasa BCV ${tasa}):

‚Ä¢ Netflix: Perfil 5$ (${Math.ceil(5 * tasa)} Bs) | Cuenta 25$ (${Math.ceil(25 * tasa)} Bs)
‚Ä¢ Disney+: Perfil 3.34$ (${Math.ceil(3.34 * tasa)} Bs)
‚Ä¢ Prime Video: Perfil 3.34$ (${Math.ceil(3.34 * tasa)} Bs)
‚Ä¢ HBO Max: Perfil 3.34$ (${Math.ceil(3.34 * tasa)} Bs)
‚Ä¢ YouTube Premium: 8.36$ (${Math.ceil(8.36 * tasa)} Bs)

¬øQu√© servicio te interesa? Tambi√©n tenemos RCV, Trimestres, cr√©ditos y m√°s.`;
    },
    
    calcularRCV: function(tasaBCV) {
        const tasa = tasaBCV || this.TASA_BCV;
        
        return `üõ°Ô∏è RESPONSABILIDAD CIVIL VEHICULAR (RCV)
Precios en $ (convertidos a tasa BCV ${tasa}):

‚Ä¢ üèçÔ∏è MOTO: 17.60$ (${Math.ceil(17.60 * tasa)} Bs)
‚Ä¢ üöó PARTICULAR (-kg): 38.72$ (${Math.ceil(38.72 * tasa)} Bs)
‚Ä¢ üöô PARTICULAR (+kg): 45.76$ (${Math.ceil(45.76 * tasa)} Bs)
‚Ä¢ üöõ CARGA: Desde 52.80$ (${Math.ceil(52.80 * tasa)} Bs)

¬øQu√© capacidad indica tu carnet? ¬°TE ENV√çO LA P√ìLIZA PRIMERO!`;
    },
    
    // Funci√≥n principal de procesamiento
    procesarMensaje: function(mensaje) {
        const texto = mensaje.toLowerCase();
        
        // Aplicar jerarqu√≠a SCD2019 seg√∫n general.txt
        // (Aqu√≠ implementar√≠as todas las reglas de tu archivo general.txt)
        
        if (texto.includes('hola') || texto.includes('buenas') || texto.includes('saludos')) {
            return this.respuestas.MENU_PRINCIPAL;
        }
        
        if (texto.includes('netflix') || texto.includes('disney') || texto.includes('streaming') || 
            texto.includes('precio') || texto.includes('cu√°nto') || texto.includes('cuesta')) {
            return this.calcularStreaming(this.TASA_BCV);
        }
        
        if (texto.includes('error') || texto.includes('falla') || texto.includes('no funciona') || 
            texto.includes('problema') || texto.includes('soporte')) {
            return this.respuestas.SOPORTE_TECNICO;
        }
        
        if (texto.includes('trimestre') || texto.includes('impuesto vehicular') || 
            texto.includes('alcald√≠a') || texto.includes('derecho de frente')) {
            return this.respuestas.TRIMESTRES;
        }
        
        if (texto.includes('rcv') || texto.includes('seguro obligatorio') || 
            texto.includes('responsabilidad civil')) {
            return this.calcularRCV(this.TASA_BCV);
        }
        
        if (texto.includes('cr√©dito') || texto.includes('pr√©stamo') || texto.includes('cdg')) {
            return this.respuestas.CREDITOS;
        }
        
        // Si no coincide con ning√∫n m√≥dulo
        return `üìã DETECCI√ìN AUTOM√ÅTICA ACTIVADA

He recibido tu mensaje. Para procesarlo correctamente:
‚úÖ Si es un COMPROBANTE DE PAGO: Aseg√∫rate que se vean Banco, Monto, Referencia y Plataforma
‚úÖ Si es DOCUMENTO para tr√°mite: Confirma por escrito qu√© documento es
‚úÖ Si es CONSULTA: Especifica servicio (Netflix, RCV, Cr√©ditos, etc.)

¬øCu√°l es tu caso?`;
    }
};
